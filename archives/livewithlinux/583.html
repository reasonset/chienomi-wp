<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="PureBuilder Simply WP Importer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Masaki Haruka" />
    <meta name="date" content="2015-04-17T00:00:00+09:00" />
    <meta name="dcterms.date" content="2015-04-17T00:00:00+09:00" />
    <title>Linux Tips - Chienomi</title>
    <style type="text/css">article {
max-width: 1080px;
margin: auto;
}</style>
  </head>
  <body>

    <section id="ContentContainer">
      <header id="MainHeader"><a href="/"><h1>Chienomi</h1></a></header>
      <section id="ArticleBox">
        <header id="ArticleTitle"><h1>Linux Tips</h1></header>
        <article id="MainArticle">
<h3 id="youtubeのプレイリストからタイトルを抽出する">YouTubeのプレイリストからタイトルを抽出する</h3>
<p>結局使わなかったのだが、ワンライナーで書いた。 比較的素直なHTMLなので解析は簡単。行指向ではないので、PerlでなくRubyにした。</p>
<pre><code>$ curl &#39;https://www.youtube.com/playlist?list=&lt;playlistid&gt;&#39; | ruby -e &quot;s = STDIN.read&quot; -e &#39;s.scan(/&lt;a class=&quot;[^&quot;]*pl-video-title-link[^&quot;]*&quot;[^&gt;]*&gt;(.*?)&lt;/m) {puts $1.strip }&#39; | grep -v 動画は削除されました</code></pre>
<h3 id="ffmpegでh.264aacな360pのmp4を">ffmpegでh.264/aacな360pのmp4を</h3>
<p>元動画は1080pのmovまたはmp4。 オーディオはいじらず、元々aac(ac3)。</p>
<pre><code>$ ffmpeg -i &lt;infile&gt; -vcodec libx264 -s 640x360 -crf 34 -strict -2 &lt;outfile&gt;.mp4</code></pre>
<p>ちなみに480p(16:9)は720x280。 <code>-crf</code>の値は18-28が推奨されている（小さいほど高ビットレート）が、今回はモバイル向けなので<code>34</code>を指定。</p>
<p>なお、6の増減でビットレートはおよそ1:2の変動となる。</p>
<h3 id="ffmpegでcowon-m2向けの動画を作る">ffmpegでCowon M2向けの動画を作る</h3>
<p>COWON M2はXVidとmp3のAVI動画で、解像度は320x240またはWMVをサポートするとある。</p>
<p>WMVだと結構サイズが大きいので、AVIで作る。 ソースは前回と同じくh.264*ac3のMOVまたはh.264*m4aのmp4。</p>
<pre><code>$ ffmpeg -i &lt;infile&gt; -vcodec libxvid -acodec libmp3lame -b:v 372k -b:a 128k -s 320x240 &lt;outfile&gt;.avi</code></pre>
<p>随分としょぼい解像度の上にアスペクト比も壊れる（プレイヤー側で調整することは可能）が、案外見られる。 ただし、360pでも細部は潰れてしまっているのでよく分からない部分は出てしまう。</p>
<h3 id="xineのuiの文字化けを直す">XineのUIの文字化けを直す</h3>
<p>fontにHerveticaを要求しているので、フォントエイリアスを設定すれば良い。</p>

<!-- PBSEARCH_RESULT -->
        </article>
    </section>
    <footer id="InfoFooter">
      <ul>
        <li>© Masaki Haruka 2003.</li>
        <li>Generated by <a href="https://gitlab.com/reasonset/pbsimply-wpimporter">PureBuilder Simply WP Importer</a></li>
      </ul>
    </footer>
  </body>
</html>
