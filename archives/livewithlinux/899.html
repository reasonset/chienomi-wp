<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="PureBuilder Simply WP Importer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Masaki Haruka" />
    <meta name="date" content="2016-04-06T00:00:00+09:00" />
    <meta name="dcterms.date" content="2016-04-06T00:00:00+09:00" />
    <title>Xリモートログイン - Chienomi</title>
    <style type="text/css">article {
max-width: 1080px;
margin: auto;
}</style>
  </head>
  <body>

    <section id="ContentContainer">
      <header id="MainHeader"><a href="/"><h1>Chienomi</h1></a></header>
      <section id="ArticleBox">
        <header id="ArticleTitle"><h1>Xリモートログイン</h1></header>
        <article id="MainArticle">
<ul id="markdown-toc">
  <li><a href="#XDMCP" id="markdown-toc-XDMCP">XDMCP</a></li>
  <li><a href="#LightDMでサーバーセットアップ" id="markdown-toc-LightDMでサーバーセットアップ">LightDMでサーバーセットアップ</a></li>
  <li><a href="#クライアント" id="markdown-toc-クライアント">クライアント</a></li>
  <li><a href="#遅い" id="markdown-toc-遅い">遅い</a></li>
  <li><a href="#セキュリティ" id="markdown-toc-セキュリティ">セキュリティ</a></li>
  <li><a href="#その他の選択肢" id="markdown-toc-その他の選択肢">その他の選択肢</a>    <ul>
      <li><a href="#NX" id="markdown-toc-NX">NX</a></li>
      <li><a href="#x2go" id="markdown-toc-x2go">x2go</a></li>
    </ul>
  </li>
  <li><a href="#Waylandの場合" id="markdown-toc-Waylandの場合">Waylandの場合</a></li>
</ul>

<p>うちにある練習機は、Pentium M 1.70GHz, 512MB RAM, 40GB SATA1 HDDという非力なラップトップだ。</p>

<p>一方、予備環境は32GB RAMを備えるGodavariマシンなので、明らかにそれを活用するのが正しい。
ただ、デスクスペース的にGodavariマシンの前に座ることができない。</p>

<p>そこで、リモートデスクトップでGodavariマシンを使いたいと考えた。</p>

<h3 id="XDMCP">XDMCP</h3>

<p>XDMCPは、昔からある「X serverを使ってリモートデスクトップ」。</p>

<p>ふたつのX serversを接続し、ターゲットのX Clientが描画する領域をXプロトコルで端末へ転送する。XDMサーバーは要求・操作を仲介する。</p>

<p>リモートデスクトップでリモートコンピュータに「ログインしたい」場合は最も簡単な方法として「ログインする画面から画面をとばしてもらえば良い」わけで、それを実現するのがXDMCPだと考えていいだろう。</p>

<h3 id="LightDMでサーバーセットアップ">LightDMでサーバーセットアップ</h3>

<p>ものすごく単純な話で、<code>/etc/lightdm/lightdm.conf</code>を</p>

<pre><code>[XDMCPServer]
enabled=true
port=177
</code></pre>

<p>のようにする。</p>

<p>Manjaroは標準(XFceイメージ)ではLightDMを使用する。KDEイメージはKDMなので、あまり安定していないらしい。
LightDMが最善なもよう。</p>

<h3 id="クライアント">クライアント</h3>

<p>XnestかXephyr。</p>

<p>なぜかログインできないというトラブルが多発したが、結局はXFceならログインできた。(最初はログインできなかった)</p>

<p>Xephyrのほうが使いやすい印象だ。なんといってもフルスクリーンが可能(<code>-fullscreen</code>オプション)。また、VNCと違い、端末側が解像度を指定できるというのもメリット。</p>

<pre><code>$ Xephyr -query 192.168.1.17 -screen 1920x1080 -br -reset -terminate :1 -fullscreen
</code></pre>

<p>LightDMセッションにおいてのみ、キーボードがUSになっていた。</p>

<h3 id="遅い">遅い</h3>

<p>リッチな環境であるVNCやRDPよりもXクライアントひとつ飛ばすだけで重いときいてはいたが、画面全体を飛ばすXDMCPだと、1GbEでも動画再生はきつい。</p>

<h3 id="セキュリティ">セキュリティ</h3>

<p>覗かれる、という問題は、SSH経由でのXDMCPは無理なようなので、どうしようもない。</p>

<h3 id="その他の選択肢">その他の選択肢</h3>

<h4 id="NX">NX</h4>

<p>良好なパフォーマンスを得る方法として、NXが挙げられている。</p>

<p>NXはNoMachineのFreeNXが昔話題になったが、その後の選択肢としてはGoogleのNeatX、あるいはnxagentといったところのようだ。</p>

<p>AURを見ると、nx-allなど、OUT OF DATEフラグが立っているがFreeNXもあるようだ。</p>

<h4 id="x2go">x2go</h4>

<p>x2goは最近話題のようだが、XとSSHということなのだろうか。</p>

<p>VPS相手にできるようだから、パフォーマンスは良いのかもしれない。</p>

<h3 id="Waylandの場合">Waylandの場合</h3>

<p>Waylandはこうした機能がなく、リモートレンダリングサーバーがあれば良いとしているらしい。</p>

<p>X.OrgをWayland上で動かせば実現するけれども、新しく作りなよ、ということらしい。</p>

<p>Waylandは今どうなっているのだろう。</p>

<!-- PBSEARCH_RESULT -->
        </article>
    </section>
    <footer id="InfoFooter">
      <ul>
        <li>© Masaki Haruka 2003.</li>
        <li>Generated by <a href="https://gitlab.com/reasonset/pbsimply-wpimporter">PureBuilder Simply WP Importer</a></li>
      </ul>
    </footer>
  </body>
</html>
