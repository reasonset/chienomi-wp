<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="PureBuilder Simply WP Importer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Masaki Haruka" />
    <meta name="date" content="2015-01-14T00:00:00+09:00" />
    <meta name="dcterms.date" content="2015-01-14T00:00:00+09:00" />
    <title>EasyCap（USBコンポジットビデオキャプチャ）をLinuxで使いたい - Chienomi</title>
    <style type="text/css">article {
max-width: 1080px;
margin: auto;
}</style>
  </head>
  <body>

    <section id="ContentContainer">
      <header id="MainHeader"><a href="/"><h1>Chienomi</h1></a></header>
      <section id="ArticleBox">
        <header id="ArticleTitle"><h1>EasyCap（USBコンポジットビデオキャプチャ）をLinuxで使いたい</h1></header>
        <article id="MainArticle">
<p>安価なUSBキャプチャデバイス、EasyCapを購入した。コンポジットとSビデオを備える。目的はVHSのデジタル記録だ。だが、これが茨の道となった。</p><p>Linuxで動作するかは確認しなかった。最悪、Windowsでキャプチャすればいいという考え方からだ。動作自体は以外と簡単で、V4L2ドライバで動くらしい。</p><code style="display: block;white-space: pre-wrap">ffmpeg -f alsa -i pulse -f v4l2 -s 1280x640 -i /dev/video1 -f mpeg - | vlc -</code><p>これで一応は表示できる（USBカメラがあるため、video1となっている。音声はPulseAudioを使用。同様に例えば</p><code style="display: block;white-space: pre-wrap">ffmpeg -f v4l2 -framerate 25 -video_size 640x360 -i /dev/video1 out.mkv</code><p>のように録画することもできる。</p><p>H.265で高品質圧縮を狙ったが、</p><code style="display: block;white-space: pre-wrap">ffmpeg -f alsa -i pulse -f v4l2 -s 640x480 -i /dev/video1 -vcodec hevc -b:v 256k -aspect 640:480 ~/tmp/test.mkv</code><p>音は記録できるが、映像はコマ落ち、変色、コマが混ざるなど見られたものではない。</p><p>Linuxでのさらなる方法として、VLCを使うという方法がある。ビデオデバイスは「キャプチャーデバイスを開く」で簡単にできるものの、オーディオデバイスはどうすればいいのか悩んでしまった。PulseAudio経由で取得したい場合、<code>pacmd list-sources</code>にある<tt class="puredoc_value">Name</tt>項目を見て、<samp>pulse://<var>Name</var></samp> とすれば取得できる。</p><p>これはレイテンシもわずかで非常に快適な視聴が可能。しかし、<tt class="puredoc_value">変換／保存</tt>から保存しようとすると、コマ落ちなどが激しい。</p><p>他に様々なアプリを試したが、満足な品質にはならなかった。</p><p>そこで、ラップトップのWindowsでトライ。純正ソフトであるHoneSteach TVRを使う。だが、まず録画設定に適切なものがない。MPEG-1、MPEG-2とも320x240しかないのだ。DVDを選択することで720x480が選択可能。これで正常に録画できるが、プレビューでは問題のないものの、録画するとかなりコマ落ちが発生する。これはVLCと同様と言ってもいいが、VLCの場合のほうが常にスムーズに録画できないため、こちらのほうがマシだとも言える。</p><p>恐らく本当に重要なビデオは2回録画したほうがいいだろう。結構な頻度で発生するため、編集前提にしたほうが良いと思う。</p><p>仕方がないのでデスクトップでトライしようとした。DTM用なので余計なソフトウェア（特にデバイスドライバ）は入れたくないのだが、仕方がない…と考えたのだが、Autorunからインストールしようとするとフリーズした挙句、Version mismatchと言われて終了してしまう。ディスクから直接にインストーラを起動すればインストールできるが、起動すると（こちらではMPEG-2で720x480が選べる）、録画を開始した途端に「ディスク容量不足です」と表示され録画が止まってしまう。他に適当な、動作するキャプチャソフトはみつけられなかった。</p><p>フラストレーションのたまる結果だ。Lowlatency Kernelならできるといったことがあるのだろうか。</p>
<!-- PBSEARCH_RESULT -->
        </article>
    </section>
    <footer id="InfoFooter">
      <ul>
        <li>© Masaki Haruka 2003.</li>
        <li>Generated by <a href="https://gitlab.com/reasonset/pbsimply-wpimporter">PureBuilder Simply WP Importer</a></li>
      </ul>
    </footer>
  </body>
</html>
