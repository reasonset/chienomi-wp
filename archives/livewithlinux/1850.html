<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="PureBuilder Simply WP Importer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Masaki Haruka" />
    <meta name="date" content="2018-11-20T00:00:00+09:00" />
    <meta name="dcterms.date" content="2018-11-20T00:00:00+09:00" />
    <title>Libreofficeが超絶重くなった - Chienomi</title>
    <style type="text/css">article {
max-width: 1080px;
margin: auto;
}</style>
  </head>
  <body>

    <section id="ContentContainer">
      <header id="MainHeader"><a href="/"><h1>Chienomi</h1></a></header>
      <section id="ArticleBox">
        <header id="ArticleTitle"><h1>Libreofficeが超絶重くなった</h1></header>
        <article id="MainArticle">
<p>Libreofficeがドキュメントを開くとものすごく重くなった。だいたいフリーズというレベルである。</p>
<p>どうもglibとの組み合わせによるようで、今年の頭くらいには発生していた問題だったようだ。 私の環境ではいままで顕在化してこなかった。</p>
<p>CPUが2.50%で張り付いている。 私のマシンは40コアなので、要はコア占有状態ということだろう。</p>
<p>glibの問題ということでUIテーマを変更すれば解決するようだ。 具体的には<code>$SAL_USE_VCLPLUGIN</code>環境変数により使用するUIエンジンを強制する。 選択肢は優先度順に</p>
<ol type="1">
<li><code>gtk3</code></li>
<li><code>gtk</code></li>
<li><code>gtk3_kde5</code></li>
<li><code>qt5</code></li>
<li><code>kde4</code></li>
<li><code>gen</code></li>
</ol>
<p>であるようだ。</p>
<p>で、glibの問題なので要はデフォルトでgtk3が使われてしまうけれど、gtk3を使わせなければ良い、と。</p>
<p>私の環境はそもそもKDE Plasmaベース (デスクトップはCinnamon) なので、KDEを使わせたいのだが、 現状Arch Linuxのlibreofficeはビルド時に<code>--enable-qt5</code>していないため、<code>qt5</code>が使えない。 もちろん、<code>kde4</code>は今や使えない。<code>gtk3_kde5</code>してしまうと結局同じ問題が発生する。 (gtk3との違いはファイルダイアログを表示すればわかるだろう)</p>
<p>そこで、<code>SAL_USE_VCL_PLUGIN=gtk libreoffice</code>とすれば正常に動作する。<code>gtk</code>でなく<code>gen</code>でも良い。</p>
<p>以前から割とgtk3テーマのlibreofficeは重かったので、もしかしたら常に強制しても良いのかもしれない。</p>
<p>ここらへんの情報はArchwikiでも古くて間違っているので困る。記述も雑だ。</p>
<p>Libreofficeは滅多に使わないのだが、請求書とか発注書とかはLibreofficeで書いている。 MS Officeと同程度にはやっぱりストレスがたまる。</p>
<p>この手のソフトウェアとしてLibreofficeよりも良い選択は恐らくない。AbiWordもCalligra Officeも機能的あるいは実用的に遠く及ばない。 にしても、やっぱりLibreofficeできれば使いたくないところだ。 紙面ベースのレイアウトをする場合はHTMLもそんなに快適ではないのでやむなく使ってはいるが。 (この手の書類は見た目だけの問題で意味的に整理する必要は全くないし)</p>
<p>とりあえずこうしてUIエンジンをかえられることを知っておくと今後もなにかの役に立つかもしれない。</p>

<!-- PBSEARCH_RESULT -->
        </article>
    </section>
    <footer id="InfoFooter">
      <ul>
        <li>© Masaki Haruka 2003.</li>
        <li>Generated by <a href="https://gitlab.com/reasonset/pbsimply-wpimporter">PureBuilder Simply WP Importer</a></li>
      </ul>
    </footer>
  </body>
</html>
