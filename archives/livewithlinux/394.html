<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="generator" content="PureBuilder Simply WP Importer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <meta name="author" content="Masaki Haruka" />
    <meta name="date" content="2014-12-03T00:00:00+09:00" />
    <meta name="dcterms.date" content="2014-12-03T00:00:00+09:00" />
    <title>現在のシステムについて - Chienomi</title>
    <style type="text/css">article {
max-width: 1080px;
margin: auto;
}</style>
  </head>
  <body>

    <section id="ContentContainer">
      <header id="MainHeader"><a href="/"><h1>Chienomi</h1></a></header>
      <section id="ArticleBox">
        <header id="ArticleTitle"><h1>現在のシステムについて</h1></header>
        <article id="MainArticle">
<p>私のコンピュータシステムについて質問があったのでまとめておく。</p><p>とはいえ、Linuxのシステムは全て説明するのは困難なので、概要に留める。</p><h2>ハードウェア</h2><p>ASRock FM2+Killer Extreame, AMD A10 7700K, 32GB RAM, 128GB SSD, 3TB HDDx5というのが主な構成。</p><p>外付けマルチドライブ、Canon MP630とEPSON GT-S630がある。プリンタ、スキャナはWindowsからは使用していない。</p><p>AUDIO I/OはAUDIO 4 DJ（セレクター経由でBOSE）、TASCAM US-366+FOSTEX AP05+VAIO付属スピーカー、アナログ出力のlogicool。US-366はLinuxでは扱えない。通常はClassic Proのヘッドフォン、製作時やリスニングではULTRASONE HFI-580を使用。</p><p>キーボードはオウルテックのメカニカルキーボード（青軸）、マウスはサンワサプライのBLUE-TECH有線、マウスパッドはELECOMの滑マウスパッド（大）。ELECOMのゲルハンドリストを使用。</p><p>机がL字型の自作となっている。</p><p>モニターは21.5インチのFullHDデュアル</p><h2>システム</h2><p>ディスクは以下のようになっている。</p><dl><dt>disk0(SSD)</dt><dd>Linuxシステム(/boot, /, /swap)</dd><dt>disk1,2,3,5</dt><dd>Btrfsボリューム</dd><dt>disk4</dt><dd>Windowsシステム(NTFS/UEFI)</dd></dl><p>Btrfsボリュームは2レッグミラー（RAID1+0相当）で運用される。サブボリュームを用いた運用で、サブボリュームの直下がEncfsディレクトリとなっており、<tt class="puredoc_pathname">~/.share.encfs</tt>にマウントされる。これをencfsで<tt class="puredoc_pathname">~/share</tt>にマウントして使用する。</p><p>そもそもホームディレクトリの主要なディレクトリやファイルはシンボリックリンクとなっており、これをマウントしないとシステムをまともに使用することができない。システム自体もLUKSで暗号化されており、オフライン攻撃に対する強度を確保する。</p><p>Manjaro/WindowsともにUEFIでブートされる。ディスクは全てGPTとなっている。</p><h2>Linux</h2><dl><dt>ディストリビューション</dt><dd>Manjaro Linux JPを使用。0.8.10からのローリングアップグレード。</dd><dt>カーネル周り</dt><dd><p>Manjaro kernel 3.17を使用。AMD Catalystドライバで、オーバースキャンの設定をしてある。</p><p>ただし、この状態ではデスクトップ環境を問わず、HDMIモニター（セカンダリー）のカーソルがやがてバグる。</p></dd><dt>デスクトップ環境</dt><dd><p>XFce, Awesome, KDE, Cinnamonを用意。通常はKDEを使用。</p><p>KDEについてはSuper+Leftでウィンドウを左に寄せる、などエッジリサイズオプションを設定してある。</p><p>Conkyを使用しているが、KDEではRSSがうまく領域を確保されないことが多いので、あまり使っていない。</p></dd><dt>日本語環境</dt><dd><p>fcitx+Mozc-UT。</p><p>fontsは、Archで用意されている日本語フォントはだいたい入っている。</p></dd><dt>インターネット</dt><dd><p>ウェブブラウザはFirefox latest（binから入れたもの。スクリプト起動）とMaxthon, opera developerを使用。</p><p>メールはMaildeliver（自作スクリプト）でチェック、振り分け、フィルタリング、通知などを行い、Claws Mailで読む/出す。通知はデフォルトの通り、SOXとNotify Sendを使用。</p><p>TwitterはMikutter(Git)を使用。2chはJD(AUR)を使用。</p><p>その他、Skype+Sype Call Recorderを使用。</p></dd><dt>マルチメディア</dt><dd><p>半自動でCDをflacとOgg Vorbisに取り込むようになっており、Amarokで音楽コレクションを再生。</p><p>PDAPにはスクリプトを用いてOgg Vorbisを転送。Ogg VorbisはV192kbps。</p><p>ビデオはVLC/SMPlayer。</p><p>音声についてはPulseAudio経由で、出力デバイスはアナログオーディオ、HDMI、そしてNI AUDIO4 DJがあるが、設定によりAUDIO 4DJから音楽のみ出すようにしている。これはPulseAudioで設定してある。現在、Audio 4 DJから鳴るのはAmarokとSMPlyer。</p><p>画像は通常はGwenviewだが、Thunar+ViwniorやRistrettoも使用。</p><p>画像は投稿時などの変換はImageMagick。その他、GIMPとInkscape。</p></dd><dt>開発</dt><dd><p>PDocはmedit、コードはKate、プレーンテキストはTeaを使用。</p><p>バージョン管理はGitで、サイトのテキストもGitで管理、大部分はリモートGitを使用している。</p><p>リモートGitはCodebreak;, GitHubが主。</p><p>開発言語はRubyとZsh</p></dd><dt>シェル</dt><dd>XFce4 TerminalとZshを使用。Zshはmomongaをベースに拡張したrcで使用している。<tt class="puredoc_idname">EXTENDED_GLOB</tt>は常にON。</dd></dl><h2>Windows</h2><dl><dt>デスクトップ</dt><dd><p>外観はU-7imate Final Version for Windows7, MacType, tronnixカーソルテーマを使用。</p><p>ランチャーはLaunchy。Rain Meterも控えめに使用。フォントは源柔フォント, 源真フォント, Rounded M+, Noto Sans Japanese, Ricty。</p></dd><dt>ユーティリティ</dt><dd><ul><li>GeekUninstall</li><li>PeaZip</li></ul></dd><dt>ファイラ</dt><dd><ul><li>As/R</li><li>Hina File Master</li></ul></dd><dt>日本語入力環境</dt><dd>Google日本語入力</dd><dt>マルチメディア</dt><dd>XnView</dd><dt>音楽制作環境</dt><dd><ul><li>SONAR X3 PRODUCER</li><li>FL STUDIO Signature Bundle</li><li>KOMPLETE 9 ULTIMATE</li><li>Cabuse 6 LE</li></ul></dd><dt>インターネット</dt><dd><dl><dt>ウェブブラウザ</dt><dd><ul><li>Cyberfox AMD64bit</li><li>Sleipnir</li></ul></dd><dt>メール</dt><dd>Oepra Mail</dd></dl></dd><dt>エディタ</dt><dd><ul><li>Uneditor</li><li>VXEditor</li></ul></dd><dt>セキュリティ</dt><dd><ul><li>ZoneAlarm Free Firewall</li><li>Avast! AntiVirus Free</li></ul></dd></dl><p>音楽制作環境なので、基本的に余計なものは入れないようにしている。</p><p>Windowsでウェブブラウジングを楽しむようなことはない。メールもメインアカウントのIMAPアクセスだけだ。だが、ブラウザは調べ物したりSoundCloudにアクセスしたりで必要となる。</p><h2>パフォーマンス</h2><p>Linuxでの並列作業や、WindowsでのDTMで使われているこのコンピュータのパフォーマンスについて述べる。</p><p>Linuxにおいて10000プロセスをforkして行う作業は、ほぼ問題ない。が、GUIはフリーズしたり、ひどい遅延を起こす。どちらかというと、fork時が問題になるようだ。ちなみに、Nepomukでシステムが使えなくなるまでには26万プロセスがforkされていたと記憶している。</p><p>おおよそ並列作業のために見境なくforkしても問題にはなりにくい。ただし、gccなどでは、やはり多くても12スレッドがいいようだ。並列性は、残念ながらあまり高くない。やはりこの作業ではコア数が必要となるので、FX-8が欲しいな、と思う。</p><p>全体にはCPUがボトルネックになっている。システムはSSDからロードされているため、ストレージ性能はそれなりにある。ネットワークもGbEでそれなりの帯域がある。RAMはKDEでも2GBもあればロードできるため、実際は8GBを越えることは稀だ。</p><p>しかし、ソフトの起動時に待たされる、特にKDEの起動が遅いことについては、やはりCPUがひっかかっているようだ。これはGIMPやLibreOfficeの待ち時間についても同様。KDEでもひっかかりが生じることがあり、明確にどこでということは読めないのだが、どうもCPUらしい。KDEは明らかにXFceのようにはさくさく動かない。リソースに常に余裕があれば、体感的な速度にはそれほど差がでないはずなので、常にではないが動きが悪いと感じるということはKDEに対して余裕がないのだろう。</p><p>ちなみに、パイプでのXZなどCPU中心となるものに関しても結構遅いと感じられる。コンパイルも意外と待つ。「すごく速い！」という印象はない。</p><p>IOスピードは、まぁ、この程度だろう。RAMも十分なのだが、それでももう少しあると快適になるシーンというのはある。バッファで使いきってしまうことは結構あるので、その時にはもっとメモリーがあればIO待ちの時間が減る。また、tmpfsに置けるファイルも増えるだろう。とはいえ、64GB化はエクスペリエンスの向上は乏しいだろう。</p><p>WindowsのDTMにおいては、ストレージスピード、RAM共に完全に余裕である。ストレージスピードが足りないようならば、ネットワークストレージのRAID0でさらなる高速化を準備していたが、その必要はなかった。</p><p>RAMは、Windowsでは逼迫したことがない。WindowsはRAMの使い方が下手だ、ということもあるが。</p><p>16トラックのシンセに20本のプラグインエフェクトを入れてもRAMには十分な余裕があったが、問題はCPUだ。上限に張り付くようなことはないのだが、US-366でlowest latencyにしていると、3トラック目あたりからノイズが乗ってくる。DTM作業をストレスなく行うには、かなりパワーが足りない印象だ。</p><p>AMP A APUは、クロック周波数がブースト時のものになっているので、その最大周波数で動いてくれるわけではない、というのが結構痛い。見ていると、ひとつのコアが60%くらいになるとノイズが乗り始める。この場合、他のコアは40%程度の使用率となっている。</p><p>Highest latencyにしてもノイズが除去できないこともある。結局、モアCPUパワー！な状態だ。</p><p>音楽制作においては、比較的低レベルでの動作が多いためか、どうもハードウェア的にインテルのほうがいいことが多いように思う。性能は同じでも、うまく動いてくれる気がする。一方、LinuxではFX 8がとても気になる。</p><p>現状、DTMではコアよりパワー、一方Linuxではパワーよりコアである感じがするのだが、まぁこれだけCPUの話ばかりになってしまうほど、CPUが遅い！</p><p>ちなみに、CPUについでパワーが足りないのは、ゲームなどしていないにもかかわらず、グラフィックだったりする。Windowsではもたつくというほどではないが、それでもYouTubeなどでは「んっ」と思う時がある。デュアルディスプレイの負荷が厳しいのかもしれないが、安定性も足りなかったりする。Windowsでもだ。</p><p>一応、この構成でもFHDx2+4kが可能なようではあるが、相当もっさりしそうだ。</p><p>クリエイティブな環境のためには、もっとCPUとGPUが必要だ、という結論に達した。</p><p>なおストレージ容量だが、現在はだいたい1.3TB。一時2.7TBまで行っていた。ネットワークが50Mbps程度しか出ていない（しかも、down率が10%を越える）ので増加は抑えめだが、本来限界まで簡単に行くとは思う。btrfsでいくらでもふやせるのはいいのだが、バックアップが難しくなっていくのは難点である。</p>
<!-- PBSEARCH_RESULT -->
        </article>
    </section>
    <footer id="InfoFooter">
      <ul>
        <li>© Masaki Haruka 2003.</li>
        <li>Generated by <a href="https://gitlab.com/reasonset/pbsimply-wpimporter">PureBuilder Simply WP Importer</a></li>
      </ul>
    </footer>
  </body>
</html>
